(this["webpackJsonpsafe-migrator"]=this["webpackJsonpsafe-migrator"]||[]).push([[21],{233:function(e,t,n){},234:function(e,t,n){},236:function(e,t){},240:function(e,t){},270:function(e,t){},274:function(e,t){},278:function(e,t){},279:function(e,t){},295:function(e,t){},297:function(e,t){},306:function(e,t){},308:function(e,t){},317:function(e,t){},319:function(e,t){},345:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),i=n(61),s=n.n(i),o=(n(233),n(2)),u=n.n(o),d=n(45),l=n(27),f=n(424),h=n(425),b=n(421),p=n(426),x=n(427),j=n(422),v=(n(234),n.p+"static/media/tx_details.1f4b7e73.png"),g=n(135),w=n.n(g),O=n(57),m=n(194),k=n.n(m),C={56:{multiSendAddress:"0xA238CBeb142c10Ef7Ad8442C6D1f9E89e07e7761",safeMasterCopyAddress:"0x3E5c63644E683549055b9Be8653de26E0B4CD36E",safeProxyFactoryAddress:"0xa6B71E26C5e0845f74c812102Ca7114b6a896AB2"}},E="0x82b71f39d719cC971B80E7A7B6c0c2aF96a5abC1",y=new O.ethers.utils.Interface(["function migrate() public","function revertMigration() public"]),B=new k.a("https://safe-transaction.bsc.gnosis.io/"),S=function(e,t){return"https://gnosis-safe.io/app/bnb:".concat(e,"/transactions/").concat(t)},A=n(195),T=Object(A.a)({networkId:56,subscriptions:{wallet:function(e){r=e.provider?new O.ethers.providers.Web3Provider(e.provider):void 0}}}),W=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a){var c,i,s,o,d,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===a||void 0===a||a("Connecting to wallet"),e.next=3,T.walletSelect();case 3:if(e.sent){e.next=5;break}throw Error("Wallet selection canceled");case 5:return e.next=7,T.walletCheck();case 7:if(e.sent){e.next=9;break}throw Error("Wallet cannot be used");case 9:if(c=null===r||void 0===r?void 0:r.getSigner()){e.next=12;break}throw Error("No Signer connected");case 12:return e.next=14,c.getAddress();case 14:if(i=e.sent){e.next=17;break}throw Error("No Wallet connected");case 17:return null===a||void 0===a||a("Checking wallet status"),e.next=20,B.getSafeInfo(t);case 20:if(!(e.sent.owners.indexOf(i)<0)){e.next=23;break}throw Error("Use is not an owner");case 23:return s=new g.EthersAdapter({ethers:O.ethers,signer:c}),e.next=26,w.a.create({ethAdapter:s,safeAddress:t,contractNetworks:C});case 26:return o=e.sent,e.next=29,o.createTransaction(n);case 29:return d=e.sent,e.next=32,o.getTransactionHash(d);case 32:return l=e.sent,null===a||void 0===a||a("Please sign the transaction"),e.next=36,o.signTransaction(d);case 36:return null===a||void 0===a||a("Waiting for service"),e.next=39,B.proposeTransaction({safeAddress:t,senderAddress:i,safeTransaction:d,safeTxHash:l});case 39:return null===a||void 0===a||a("Transaction submitted to service"),e.abrupt("return",l);case 41:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,{to:E,value:"0",data:y.encodeFunctionData("migrate"),operation:1},n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,{to:E,value:"0",data:y.encodeFunctionData("revertMigration"),operation:1},n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getSafeInfo(t);case 2:return n=e.sent,e.abrupt("return",{fixEnabled:n.masterCopy.toLowerCase()==="0x4e6A0E034318Bec795c5E1dD4817A424767265A7".toLowerCase()});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=n(8);var I=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),s=i[0],o=i[1],g=Object(a.useState)(void 0),w=Object(l.a)(g,2),O=w[0],m=w[1],k=Object(a.useState)(!1),C=Object(l.a)(k,2),E=C[0],y=C[1],B=Object(a.useState)(""),A=Object(l.a)(B,2),T=A[0],W=A[1],I=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,F(n,W);case 4:t=e.sent,o(S(n,t)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),W(""+e.t0);case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,M(n,W);case 4:t=e.sent,o(S(n,t)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),W(""+e.t0);case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(t),m(void 0),o(""),W(""),e.prev=4,y(!0),e.t0=m,e.next=9,N(t);case 9:e.t1=e.sent,(0,e.t0)(e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(4),console.error(e.t2);case 16:return e.prev=16,y(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(f.a,{variant:"h4",children:"Safe BSC Migrator"}),Object(D.jsx)(f.a,{variant:"h6",children:"Motivation"}),Object(D.jsxs)(f.a,{variant:"body1",maxWidth:800,padding:1,children:["With this web app it is possible to migrate to and from a version of Safe that does not emit any events when receiving native BNB to work around an issue on ",Object(D.jsx)("b",{children:"BSC"})," that would make it under certain conditions impossible to receive native BNB from another contract."]}),Object(D.jsxs)(f.a,{variant:"body1",maxWidth:800,padding:1,children:["More information can be found in the ",Object(D.jsx)(h.a,{href:"https://github.com/rmeissner/safe-migrator#safe-migrator",children:"repository"})," of this project."]}),Object(D.jsx)(f.a,{variant:"h6",children:"Guide"}),Object(D.jsx)(f.a,{variant:"body1",maxWidth:800,padding:1,children:"You require access to one of the owner wallets of the Safe that should be migrated."}),Object(D.jsx)(f.a,{variant:"body1",maxWidth:800,padding:1,children:"Once an action has been triggered on the interface a Safe transaction hash needs to be signed. Note: This step will NEVER trigger a transaction, therefore there is no need to own any BNB."}),Object(D.jsx)(f.a,{variant:"body1",maxWidth:800,padding:1,children:"The transaction will be visible in the Gnosis Safe web interface and should be inspected before execution."}),Object(D.jsx)(f.a,{variant:"h6",children:"Transaction Details"}),Object(D.jsxs)(f.a,{variant:"body1",maxWidth:800,padding:1,children:["The transaction triggered will use ",Object(D.jsx)("b",{children:"delegate call"})," to interact with ",Object(D.jsx)(h.a,{href:"https://www.bscscan.com/address/0x82b71f39d719cC971B80E7A7B6c0c2aF96a5abC1#code",children:"0x82b71f39d719cC971B80E7A7B6c0c2aF96a5abC1"})," and contain ",Object(D.jsx)("b",{children:"0 BNB"})," of value. It will call either the method ",Object(D.jsx)("b",{children:"migrate"})," or ",Object(D.jsx)("b",{children:"revertMigration"}),"."]}),Object(D.jsx)(f.a,{variant:"body1",maxWidth:800,children:Object(D.jsx)("img",{src:v,alt:"Transaction Details"})}),Object(D.jsx)(f.a,{variant:"caption",children:"Example transaction details"}),Object(D.jsx)(f.a,{variant:"h6",children:"Actions"}),Object(D.jsx)(f.a,{variant:"body1",maxWidth:800,children:"Enter Safe Address to get started!"}),Object(D.jsx)(b.a,{value:n,onChange:function(e){return L(e.target.value)},label:"Safe Address"}),Object(D.jsxs)(p.a,{sx:{paddingTop:4,textAlign:"center",maxWidth:800,display:"flex",flexDirection:"column",alignItems:"center"},children:[!!T&&Object(D.jsx)(f.a,{variant:"body1",children:T}),E&&Object(D.jsx)(x.a,{}),!!s&&Object(D.jsx)(h.a,{href:s,target:"_blank",children:"Show transaction in Safe interface"}),!s&&!E&&O&&!O.fixEnabled&&Object(D.jsx)(j.a,{onClick:function(){return I()},children:"Migrate To Workaround Version"}),!s&&!E&&O&&O.fixEnabled&&Object(D.jsx)(j.a,{onClick:function(){return P()},children:"Migrate To Official Version"})]})]})},P=function(e){e&&e instanceof Function&&n.e(91).then(n.bind(null,2147)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};s.a.render(Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(I,{})}),document.getElementById("root")),P()}},[[345,22,24]]]);
//# sourceMappingURL=main.b651c3ef.chunk.js.map